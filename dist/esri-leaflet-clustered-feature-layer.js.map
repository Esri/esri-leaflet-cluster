{"version":3,"file":"esri-leaflet-clustered-feature-layer.js","sources":["../src/ClusteredFeatureLayer.js"],"names":["factory","define","amd","L","Esri","module","exports","require","window","esri","ClusteredFeatureLayer","Layers","clusteredFeatureLayer","options","FeatureManager","extend","statics","EVENTS","CLUSTEREVENTS","initialize","prototype","call","this","setOptions","_layers","_leafletIds","cluster","MarkerClusterGroup","_key","Math","random","toString","replace","on","_propagateEvent","_propagateClusterEvent","onAdd","map","_map","addLayer","onRemove","removeLayer","createLayers","features","markers","i","length","geojson","layer","id","newLayer","GeoJSON","geometryToLayer","pointToLayer","coordsToLatLng","feature","asFeature","defaultOptions","_leaflet_id","resetStyle","_popup","bindPopup","onEachFeature","fire","timeField","_featureWithinTimeRange","push","addLayers","ids","layersToAdd","removeLayers","permanent","layersToRemove","setFeatureStyle","style","setStyle","eachFeature","fn","popupContent","unbindPopup","context","getFeature","e","target","type"],"mappings":"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"}